---
title: 2020-11-03 星期二 Daily
time: 2020-11-03 08:34
tags: Markdown,GitMdNote,diary-2020-11,diary-workdaily-2020-11,diary-2020-W44
notebook: diary-2020
---

# 2020-11-03 星期二 Daily

## Inbox && Plan

- [ ] 练习vim的常用操作
- [ ] 阅读新闻,粗略的阅读（时政要闻）  10min
- [ ] golang语言，语法学习，每天一个知识点，考试，结合记忆曲线
- [ ] 学习下ts的语法
- [ ] 入库检测工具，增加关机功能  3h            -- 不重要不紧急
    - [ ] 只提供ssh协议的通道(思考：底层库只提供能力，业务相关功能，让业务层封装，减少底层库的修改频次)
- [ ] 前置服务，国密协议单元测试  4h            -- 紧急重要
- [ ] 离线升级包
    - 第一阶段
        - [x] 生成离线升级包脚本化
        - [x] 维护工具能够正确执行升级包
    - 第二阶段
        - [ ] 管理维护工具，集成离线升级包制作功能
- [x] P201出货时，判断机器内版本和当前发布版本是否一致，不一致删除替换 --重要不紧急
    - 服务端，增加获取版本脚本
    - 出货程序，判断版本号，不一致删除

## Done

- 离线升级包  8h
    - 生成离线升级包脚本化
    - 维护工具能够正确执行升级包

## Study & Learn

## Week Plan

1. 国密项目
    - [ ] 运算服务兼容国密算法算法
    - [x] 通道算法，添加国密算法
2. 密钥系统版本迭代项目
    - 密钥前置服务修改
3. 微服务技术预研
    - 自动化构建
    - 技术继续预研

## Tomorrow Plan

## Ideas  && Thinks

## Problem


## P201管理维护工具

- 增加按钮
    - [x] 关机按钮，公司预装完，需要关机，只能远程，然后关机，（发卡室，不知道密钥，只能断电，有数据损坏的危险）
    - [x] 重启按钮
- **放弃**
    - [ ] 重启MySQL容器     --放弃，通过设备重启实现
    - [ ] 重启Redis容器     --放弃，通过设备重启实现
    - [x] 防火墙重启，Docker服务重启   -- 放弃，使用重启按钮可以解决问题
- 优化
    - [ ] 升级固件
    - [x] 日志查看
    - [x] 密钥快捷方式
    - [x] 界面调整，类别调整
    - [x] 版本信息，调整
    - [x] 状态栏，信息显示修改
    - [x] 代码托管至gitlab

## 入库检测工具

- 增加关机按钮
    - 入库检测完毕，直接关闭机器  [优先级 低]

## 前置服务改动点

- [x] 前置服务状态监控，页面
    - 名字修改 “密钥前置服务” 改为 “密钥前置服务-状态监控”
- [ ] 兼容，卡厂发卡机发错的一批卡，兼容TAC，MAC
    - 周口师范学院补助钱包充值特殊处理，加配置参数控制
- [ ] 批量发卡系统获取洗卡数据接口修复
- [ ] 增加接口，给密钥总控管理工具调用，包括判断密钥控制归属字段和插入日志

## P201入库出货流程

- [x] 入库出货流程增加对P201-101型号小机器的支持
- [x] Docker部署方式，防火墙问题
- [ ] Docker内部加入版本描述文件，启动Docker时，打印到控制台
- [ ] 提交打包程序，必须提供版本号
- [x] P201初始化脚本(shell脚本)，流程优化，增加入库检测和出货信息收集
- [x] P201流程交付到供应链（入库和发卡室），供应链可以自己处理和发货
- [ ] P201管理网口，DEFROUTE设置为no，应用网口设置为yes or no ?
```
DEFROUTE=yes                          
就是default route，是否把这个eth设置为默认路由
```

## 密钥系统版本迭代项目-任务跟踪

|模块 |改动内容|负责人|预估工时(H)|本期是否要做|
| :--- | :--- | :--- | :--- | :--- |
| 前置服务|一、批量发卡系统获取洗卡数据接口修复。|李旭|0|是|
| - |二、周口师范学院补助钱包充值特殊处理，加配置参数控制。 |李旭 |16 |是|
| - | 三、增加接口，给密钥总控管理工具调用，包括判断密钥控制归属字段和插入日志。 |李旭 |16 |是|
|P201预装 |一、入库出货流程增加对P201-101型号小机器的支持 |李旭 |32 |是 |
| - |二、Docker部署方式，防火墙问题。 |李旭 |24 |是 |
| - |三、Docker内部加入版本描述文件，启动Docker时，打印到控制台 |李旭 |2 |是 |
| - |四、提交打包程序，必须提供版本号。 |李旭 |0 |是 |
| - |五、P201初始化脚本(shell脚本)，流程优化，增加入库检测和出货信息收集 |李旭 |40 |是 |
| - |六、P201流程交付到供应链（入库和发卡室），供应链可以自己处理和发货 |李旭 |0 |是 |
```
